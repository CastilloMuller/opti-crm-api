import{a0 as z,Q as E,r as v,c as M,p as O,u as Q,v as e,D as s,C as b,I as i,N as l,a1 as W,x as p,s as $,P as _}from"./vendor-1b1e291c.js";import{u as G,_ as H}from"./index-5f40dbbc.js";const y=z.create({baseURL:"",headers:{"Content-Type":"application/json"},timeout:1e4});y.interceptors.request.use(a=>a,a=>(console.error("Request error:",a),Promise.reject(a)));y.interceptors.response.use(a=>a,a=>(a.response?console.error("Response error:",{status:a.response.status,data:a.response.data}):a.request?console.error("No response received:",a.request):console.error("Request setup error:",a.message),Promise.reject(a)));const J={class:"dashboard-view"},K={class:"dashboard-header"},X={class:"header-actions"},Y={class:"connection-status"},Z={class:"quick-actions"},ee={class:"dashboard-grid"},te={class:"lead-stats"},se={class:"stat-item"},ae={class:"stat-value"},ne={class:"stat-item"},oe={class:"stat-value"},ie={class:"stat-item"},le={class:"stat-value"},ce={class:"stat-item"},re={class:"stat-value"},de={class:"stat-item"},ue={class:"stat-value"},pe=E({__name:"DashboardView",setup(a){const d=W(),{isConnected:h}=G(),c=v({stats:{total:0,active:0,converted:0,conversionRate:"0%",value:0},recentActivity:[],recentLeads:[]}),w=v(new Date().toLocaleString()),C=v(!1),g=v(null),f=M(()=>({status:h.value?"Connected":"Disconnected",icon:h.value?"pi pi-check-circle":"pi pi-times-circle",class:h.value?"status-connected":"status-disconnected"}));async function D(){C.value=!0,g.value=null;try{const t=await y.get("/api/dashboard");t.data&&(c.value=t.data,w.value=new Date().toLocaleString())}catch(t){console.error("Error fetching dashboard data:",t),g.value=t.message||"Failed to fetch dashboard data"}finally{C.value=!1}}function A(){d.push("/leads?new=true")}function q(){d.push("/calendar?new=true")}function U(){d.push("/analytics")}function B(){d.push("/leads")}function P(t){t.data&&t.data.id&&d.push(`/leads/${t.data.id}`)}function L(t){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t||0)}function k(t){return new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}function I(t){return{lead:"pi pi-user-plus",task:"pi pi-calendar",note:"pi pi-pencil",call:"pi pi-phone",email:"pi pi-envelope",meeting:"pi pi-users"}[t]||"pi pi-info-circle"}function j(t){return{new:"info",active:"warning",converted:"success",lost:"danger"}[t]||"info"}function R(t){return t.charAt(0).toUpperCase()+t.slice(1)}return O(()=>{D()}),(t,n)=>{const u=p("Button"),m=p("Panel"),r=p("Column"),S=p("DataTable"),F=p("Tag");return $(),Q("div",J,[e("div",K,[n[0]||(n[0]=e("h1",null,"Dashboard",-1)),e("div",X,[s(u,{label:"Refresh",icon:"pi pi-refresh",onClick:D,class:"p-button-outlined"})]),e("div",Y,[e("i",{class:b(f.value.icon)},null,2),e("span",{class:b(f.value.class)},i(f.value.status),3),e("small",null,"Last update: "+i(w.value),1)])]),e("div",Z,[s(u,{label:"New Lead",icon:"pi pi-plus",onClick:A,class:"p-button-success"}),s(u,{label:"Add Task",icon:"pi pi-calendar-plus",onClick:q}),s(u,{label:"View Analytics",icon:"pi pi-chart-line",onClick:U,class:"p-button-help"})]),e("div",ee,[s(m,{header:"Lead Overview",class:"dashboard-panel"},{icons:l(()=>[s(u,{icon:"pi pi-arrow-right",onClick:B,class:"p-button-text p-button-sm"})]),default:l(()=>{var o,T,V,N,x;return[e("div",te,[e("div",se,[e("div",ae,i(((o=c.value.stats)==null?void 0:o.total)||0),1),n[1]||(n[1]=e("div",{class:"stat-label"},"Total Leads",-1))]),e("div",ne,[e("div",oe,i(((T=c.value.stats)==null?void 0:T.active)||0),1),n[2]||(n[2]=e("div",{class:"stat-label"},"Active Leads",-1))]),e("div",ie,[e("div",le,i(((V=c.value.stats)==null?void 0:V.converted)||0),1),n[3]||(n[3]=e("div",{class:"stat-label"},"Converted",-1))]),e("div",ce,[e("div",re,i(((N=c.value.stats)==null?void 0:N.conversionRate)||"0%"),1),n[4]||(n[4]=e("div",{class:"stat-label"},"Conversion Rate",-1))]),e("div",de,[e("div",ue,i(L(((x=c.value.stats)==null?void 0:x.value)||0)),1),n[5]||(n[5]=e("div",{class:"stat-label"},"Total Value",-1))])])]}),_:1}),s(m,{header:"Recent Activity",class:"dashboard-panel"},{default:l(()=>[s(S,{value:c.value.recentActivity||[],class:"activity-timeline",rows:5},{default:l(()=>[s(r,{field:"type",header:"Type"},{body:l(({data:o})=>[e("i",{class:b(I(o.type)),style:{"margin-right":"0.5rem"}},null,2),_(" "+i(R(o.type)),1)]),_:1}),s(r,{field:"description",header:"Description"}),s(r,{field:"date",header:"Date"},{body:l(({data:o})=>[_(i(k(o.date)),1)]),_:1})]),_:1},8,["value"])]),_:1}),s(m,{header:"Recent Leads",class:"dashboard-panel"},{default:l(()=>[s(S,{value:c.value.recentLeads||[],class:"recent-leads-table",rows:5,onRowClick:P,style:{cursor:"pointer"}},{default:l(()=>[s(r,{field:"name",header:"Name"}),s(r,{field:"company",header:"Company"}),s(r,{field:"status",header:"Status"},{body:l(({data:o})=>[s(F,{value:R(o.status),severity:j(o.status)},null,8,["value","severity"])]),_:1}),s(r,{field:"value",header:"Value"},{body:l(({data:o})=>[_(i(L(o.value)),1)]),_:1}),s(r,{field:"lastContact",header:"Last Contact"},{body:l(({data:o})=>[_(i(k(o.lastContact)),1)]),_:1})]),_:1},8,["value"])]),_:1})])])}}});const he=H(pe,[["__scopeId","data-v-8af65845"]]);export{he as default};
