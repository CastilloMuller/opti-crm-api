import{X as T,Q as q,r as C,c as E,p as U,u as B,v as e,J as t,R as a,C as f,G as l,N as c,Y as I,s as P,P as v}from"./vendor-62589595.js";import{s as m}from"./panel.esm-2f7f2151.js";import{u as j,s as p,_ as z}from"./index-718f3ca2.js";import{s as g,a as d}from"./column.esm-46021230.js";import{s as F}from"./tag.esm-a96d2036.js";const M=()=>{{const o=window.location.protocol,u=window.location.host;return`${o}//${u}`}},G=`${M()}/api`,D=T.create({baseURL:G,headers:{"Content-Type":"application/json"}});D.interceptors.response.use(o=>o,o=>(console.error("API Error:",o),o.response?(console.error("Response data:",o.response.data),console.error("Response status:",o.response.status)):o.request?console.error("No response received:",o.request):console.error("Error setting up request:",o.message),Promise.reject(o)));const J=async()=>(await D.get("/dashboard")).data,O={class:"dashboard-view"},Q={class:"dashboard-header"},W={class:"header-actions"},X={class:"connection-status"},Y={class:"quick-actions"},H={class:"dashboard-grid"},K={class:"lead-stats"},Z={class:"stat-item"},ee={class:"stat-value"},se={class:"stat-item"},te={class:"stat-value"},ae={class:"stat-item"},oe={class:"stat-value"},ne={class:"stat-item"},ie={class:"stat-value"},le={class:"stat-item"},ce={class:"stat-value"},re=q({__name:"DashboardView",setup(o){const u=I(),{isConnected:h}=j(),r=C({stats:{totalLeads:0,activeLeads:0,convertedLeads:0,conversionRate:"0%",totalValue:0},recentLeads:[],recentActivity:[]}),b=C(new Date().toLocaleString()),_=E(()=>({status:h.value?"Connected":"Disconnected",icon:h.value?"pi pi-check-circle":"pi pi-times-circle",class:h.value?"connected":"disconnected"})),y=async()=>{try{const s=await J();r.value=s,b.value=new Date().toLocaleString()}catch(s){console.error("Error fetching dashboard data:",s)}},k=()=>{u.push("/leads?new=true")},N=()=>{u.push("/calendar?new=true")},R=()=>{u.push("/analytics")},V=()=>{u.push("/leads")},A=s=>{s.data&&s.data.id&&u.push(`/leads/${s.data.id}`)},w=s=>new Intl.NumberFormat("nl-NL",{style:"currency",currency:"EUR"}).format(s),L=s=>new Date(s).toLocaleDateString("nl-NL"),S=s=>({call:"pi pi-phone",email:"pi pi-envelope",meeting:"pi pi-calendar",note:"pi pi-file",task:"pi pi-check-square"})[s]||"pi pi-info-circle",x=s=>({New:"info",Active:"warning",Converted:"success",Lost:"danger"})[s]||"info",$=s=>s.charAt(0).toUpperCase()+s.slice(1);return U(()=>{y()}),(s,n)=>(P(),B("div",O,[e("div",Q,[n[0]||(n[0]=e("h1",null,"Dashboard",-1)),e("div",W,[t(a(p),{label:"Refresh",icon:"pi pi-refresh",onClick:y,class:"p-button-outlined"})]),e("div",X,[e("i",{class:f(_.value.icon)},null,2),e("span",{class:f(_.value.class)},l(_.value.status),3),e("small",null,"Last update: "+l(b.value),1)])]),e("div",Y,[t(a(p),{label:"New Lead",icon:"pi pi-plus",onClick:k,class:"p-button-success"}),t(a(p),{label:"Add Task",icon:"pi pi-calendar-plus",onClick:N}),t(a(p),{label:"View Analytics",icon:"pi pi-chart-line",onClick:R,class:"p-button-help"})]),e("div",H,[t(a(m),{header:"Lead Overview",class:"dashboard-panel"},{icons:c(()=>[t(a(p),{icon:"pi pi-arrow-right",onClick:V,class:"p-button-text p-button-sm"})]),default:c(()=>[e("div",K,[e("div",Z,[e("div",ee,l(r.value.stats.totalLeads),1),n[1]||(n[1]=e("div",{class:"stat-label"},"Total Leads",-1))]),e("div",se,[e("div",te,l(r.value.stats.activeLeads),1),n[2]||(n[2]=e("div",{class:"stat-label"},"Active Leads",-1))]),e("div",ae,[e("div",oe,l(r.value.stats.convertedLeads),1),n[3]||(n[3]=e("div",{class:"stat-label"},"Converted Leads",-1))]),e("div",ne,[e("div",ie,l(r.value.stats.conversionRate),1),n[4]||(n[4]=e("div",{class:"stat-label"},"Conversion Rate",-1))]),e("div",le,[e("div",ce,l(w(r.value.stats.totalValue)),1),n[5]||(n[5]=e("div",{class:"stat-label"},"Total Value",-1))])])]),_:1}),t(a(m),{header:"Recent Activity",class:"dashboard-panel"},{default:c(()=>[t(a(g),{value:r.value.recentActivity,class:"activity-timeline",rows:5},{default:c(()=>[t(a(d),{field:"type",header:"Type"},{body:c(({data:i})=>[e("i",{class:f(S(i.type)),style:{"margin-right":"0.5rem"}},null,2),v(" "+l($(i.type)),1)]),_:1}),t(a(d),{field:"description",header:"Description"}),t(a(d),{field:"date",header:"Date"},{body:c(({data:i})=>[v(l(L(i.date)),1)]),_:1})]),_:1},8,["value"])]),_:1}),t(a(m),{header:"Recent Leads",class:"dashboard-panel"},{default:c(()=>[t(a(g),{value:r.value.recentLeads,class:"recent-leads-table",rows:5,onRowClick:A,selectionMode:"single"},{default:c(()=>[t(a(d),{field:"name",header:"Name"}),t(a(d),{field:"company",header:"Company"}),t(a(d),{field:"status",header:"Status"},{body:c(({data:i})=>[t(a(F),{value:i.status,severity:x(i.status)},null,8,["value","severity"])]),_:1}),t(a(d),{field:"value",header:"Value"},{body:c(({data:i})=>[v(l(w(i.value)),1)]),_:1}),t(a(d),{field:"lastContact",header:"Last Contact"},{body:c(({data:i})=>[v(l(L(i.lastContact)),1)]),_:1})]),_:1},8,["value"])]),_:1})])]))}});const _e=z(re,[["__scopeId","data-v-238acbfa"]]);export{_e as default};
