import{X as $,Q as V,r as f,c as g,p as R,u as k,v as e,J as t,R as a,C as w,G as i,N as r,Y as N,s as A,P as L}from"./vendor-62589595.js";import{s as h}from"./panel.esm-016003e0.js";import{u as q,s as u,_ as S}from"./index-6b7b0ff2.js";import{s as y,a as p}from"./column.esm-14ebfccd.js";import"./index.esm-a4c4bec3.js";const T=()=>{{const o=window.location.protocol,c=window.location.host;return`${o}//${c}`}},E=`${T()}/api`,D=$.create({baseURL:E,headers:{"Content-Type":"application/json"}});D.interceptors.response.use(o=>o,o=>(console.error("API Error:",o),o.response?(console.error("Response data:",o.response.data),console.error("Response status:",o.response.status)):o.request?console.error("No response received:",o.request):console.error("Error setting up request:",o.message),Promise.reject(o)));const x=async()=>(await D.get("/dashboard")).data,B={class:"dashboard-view"},U={class:"dashboard-header"},I={class:"header-actions"},P={class:"connection-status"},j={class:"quick-actions"},z={class:"dashboard-grid"},F={class:"lead-stats"},G={class:"stat-item"},J={class:"stat-value"},M={class:"stat-item"},O={class:"stat-value"},Q={class:"stat-item"},W={class:"stat-value"},X={class:"stat-item"},Y={class:"stat-value"},H={class:"stat-item"},K={class:"stat-value"},Z=V({__name:"DashboardView",setup(o){N();const{isConnected:c}=q(),l=f({stats:{totalLeads:0,activeLeads:0,convertedLeads:0,conversionRate:"0%",totalValue:0},recentLeads:[],recentActivity:[]}),_=f(new Date().toLocaleString()),v=g(()=>({status:c.value?"Connected":"Disconnected",icon:c.value?"pi pi-check-circle":"pi pi-times-circle",class:c.value?"connected":"disconnected"})),m=async()=>{try{const n=await x();l.value=n,_.value=new Date().toLocaleString()}catch(n){console.error("Error fetching dashboard data:",n)}},b=n=>new Intl.NumberFormat("nl-NL",{style:"currency",currency:"EUR"}).format(n),C=n=>new Date(n).toLocaleDateString("nl-NL");return R(()=>{m()}),(n,s)=>(A(),k("div",B,[e("div",U,[s[4]||(s[4]=e("h1",null,"Dashboard",-1)),e("div",I,[t(a(u),{label:"Refresh",icon:"pi pi-refresh",onClick:m,class:"p-button-outlined"})]),e("div",P,[e("i",{class:w(v.value.icon)},null,2),e("span",{class:w(v.value.class)},i(v.value.status),3),e("small",null,"Last update: "+i(_.value),1)])]),e("div",j,[t(a(u),{label:"New Lead",icon:"pi pi-plus",onClick:s[0]||(s[0]=d=>n.$router.push("/leads?new=true")),class:"p-button-success"}),t(a(u),{label:"Add Task",icon:"pi pi-calendar-plus",onClick:s[1]||(s[1]=d=>n.$router.push("/calendar?new=true"))}),t(a(u),{label:"View Analytics",icon:"pi pi-chart-line",onClick:s[2]||(s[2]=d=>n.$router.push("/analytics")),class:"p-button-help"})]),e("div",z,[t(a(h),{header:"Lead Overview",class:"dashboard-panel"},{icons:r(()=>[t(a(u),{icon:"pi pi-arrow-right",onClick:s[3]||(s[3]=d=>n.$router.push("/leads")),class:"p-button-text p-button-sm"})]),default:r(()=>[e("div",F,[e("div",G,[e("div",J,i(l.value.stats.totalLeads),1),s[5]||(s[5]=e("div",{class:"stat-label"},"Total Leads",-1))]),e("div",M,[e("div",O,i(l.value.stats.activeLeads),1),s[6]||(s[6]=e("div",{class:"stat-label"},"Active Leads",-1))]),e("div",Q,[e("div",W,i(l.value.stats.convertedLeads),1),s[7]||(s[7]=e("div",{class:"stat-label"},"Converted Leads",-1))]),e("div",X,[e("div",Y,i(l.value.stats.conversionRate),1),s[8]||(s[8]=e("div",{class:"stat-label"},"Conversion Rate",-1))]),e("div",H,[e("div",K,i(b(l.value.stats.totalValue)),1),s[9]||(s[9]=e("div",{class:"stat-label"},"Total Value",-1))])])]),_:1}),t(a(h),{header:"Recent Activity",class:"dashboard-panel"},{default:r(()=>[t(a(y),{value:l.value.recentActivity,class:"activity-timeline"},{default:r(()=>[t(a(p),{field:"description",header:"Activity"}),t(a(p),{field:"timestamp",header:"Timestamp"})]),_:1},8,["value"])]),_:1}),t(a(h),{header:"Recent Leads",class:"dashboard-panel"},{default:r(()=>[t(a(y),{value:l.value.recentLeads,class:"recent-leads-table"},{default:r(()=>[t(a(p),{field:"name",header:"Name"}),t(a(p),{field:"quotationValue",header:"Value"},{body:r(({data:d})=>[L(i(b(d.quotationValue)),1)]),_:1}),t(a(p),{field:"decisionDate",header:"Decision"},{body:r(({data:d})=>[L(i(C(d.decisionDate)),1)]),_:1})]),_:1},8,["value"])]),_:1})])]))}});const ne=S(Z,[["__scopeId","data-v-842ebd95"]]);export{ne as default};
