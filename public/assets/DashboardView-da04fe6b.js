import{a0 as T,Q as q,r as C,c as E,p as I,u as U,v as e,D as t,R as a,C as b,I as l,N as c,a1 as B,s as P,P as v}from"./vendor-1b1e291c.js";import{u as j,s as p,a as f,b as g,c as r,d as z,_ as F}from"./index-306a5155.js";const M=()=>{{const o=window.location.protocol,u=window.location.host;return`${o}//${u}`}},O=`${M()}/api`,D=T.create({baseURL:O,headers:{"Content-Type":"application/json"}});D.interceptors.response.use(o=>o,o=>(console.error("API Error:",o),o.response?(console.error("Response data:",o.response.data),console.error("Response status:",o.response.status)):o.request?console.error("No response received:",o.request):console.error("Error setting up request:",o.message),Promise.reject(o)));const Q=async()=>(await D.get("/dashboard")).data,W={class:"dashboard-view"},G={class:"dashboard-header"},H={class:"header-actions"},J={class:"connection-status"},K={class:"quick-actions"},X={class:"dashboard-grid"},Y={class:"lead-stats"},Z={class:"stat-item"},ee={class:"stat-value"},se={class:"stat-item"},te={class:"stat-value"},ae={class:"stat-item"},oe={class:"stat-value"},ne={class:"stat-item"},ie={class:"stat-value"},le={class:"stat-item"},ce={class:"stat-value"},de=q({__name:"DashboardView",setup(o){const u=B(),{isConnected:h}=j(),d=C({stats:{totalLeads:0,activeLeads:0,convertedLeads:0,conversionRate:"0%",totalValue:0},recentLeads:[],recentActivity:[]}),m=C(new Date().toLocaleString()),_=E(()=>({status:h.value?"Connected":"Disconnected",icon:h.value?"pi pi-check-circle":"pi pi-times-circle",class:h.value?"connected":"disconnected"})),y=async()=>{try{const s=await Q();d.value=s,m.value=new Date().toLocaleString()}catch(s){console.error("Error fetching dashboard data:",s)}},k=()=>{u.push("/leads?new=true")},N=()=>{u.push("/calendar?new=true")},R=()=>{u.push("/analytics")},V=()=>{u.push("/leads")},A=s=>{s.data&&s.data.id&&u.push(`/leads/${s.data.id}`)},w=s=>new Intl.NumberFormat("nl-NL",{style:"currency",currency:"EUR"}).format(s),L=s=>new Date(s).toLocaleDateString("nl-NL"),S=s=>({call:"pi pi-phone",email:"pi pi-envelope",meeting:"pi pi-calendar",note:"pi pi-file",task:"pi pi-check-square"})[s]||"pi pi-info-circle",x=s=>({New:"info",Active:"warning",Converted:"success",Lost:"danger"})[s]||"info",$=s=>s.charAt(0).toUpperCase()+s.slice(1);return I(()=>{y()}),(s,n)=>(P(),U("div",W,[e("div",G,[n[0]||(n[0]=e("h1",null,"Dashboard",-1)),e("div",H,[t(a(p),{label:"Refresh",icon:"pi pi-refresh",onClick:y,class:"p-button-outlined"})]),e("div",J,[e("i",{class:b(_.value.icon)},null,2),e("span",{class:b(_.value.class)},l(_.value.status),3),e("small",null,"Last update: "+l(m.value),1)])]),e("div",K,[t(a(p),{label:"New Lead",icon:"pi pi-plus",onClick:k,class:"p-button-success"}),t(a(p),{label:"Add Task",icon:"pi pi-calendar-plus",onClick:N}),t(a(p),{label:"View Analytics",icon:"pi pi-chart-line",onClick:R,class:"p-button-help"})]),e("div",X,[t(a(f),{header:"Lead Overview",class:"dashboard-panel"},{icons:c(()=>[t(a(p),{icon:"pi pi-arrow-right",onClick:V,class:"p-button-text p-button-sm"})]),default:c(()=>[e("div",Y,[e("div",Z,[e("div",ee,l(d.value.stats.totalLeads),1),n[1]||(n[1]=e("div",{class:"stat-label"},"Total Leads",-1))]),e("div",se,[e("div",te,l(d.value.stats.activeLeads),1),n[2]||(n[2]=e("div",{class:"stat-label"},"Active Leads",-1))]),e("div",ae,[e("div",oe,l(d.value.stats.convertedLeads),1),n[3]||(n[3]=e("div",{class:"stat-label"},"Converted Leads",-1))]),e("div",ne,[e("div",ie,l(d.value.stats.conversionRate),1),n[4]||(n[4]=e("div",{class:"stat-label"},"Conversion Rate",-1))]),e("div",le,[e("div",ce,l(w(d.value.stats.totalValue)),1),n[5]||(n[5]=e("div",{class:"stat-label"},"Total Value",-1))])])]),_:1}),t(a(f),{header:"Recent Activity",class:"dashboard-panel"},{default:c(()=>[t(a(g),{value:d.value.recentActivity,class:"activity-timeline",rows:5},{default:c(()=>[t(a(r),{field:"type",header:"Type"},{body:c(({data:i})=>[e("i",{class:b(S(i.type)),style:{"margin-right":"0.5rem"}},null,2),v(" "+l($(i.type)),1)]),_:1}),t(a(r),{field:"description",header:"Description"}),t(a(r),{field:"date",header:"Date"},{body:c(({data:i})=>[v(l(L(i.date)),1)]),_:1})]),_:1},8,["value"])]),_:1}),t(a(f),{header:"Recent Leads",class:"dashboard-panel"},{default:c(()=>[t(a(g),{value:d.value.recentLeads,class:"recent-leads-table",rows:5,onRowClick:A,selectionMode:"single"},{default:c(()=>[t(a(r),{field:"name",header:"Name"}),t(a(r),{field:"company",header:"Company"}),t(a(r),{field:"status",header:"Status"},{body:c(({data:i})=>[t(a(z),{value:i.status,severity:x(i.status)},null,8,["value","severity"])]),_:1}),t(a(r),{field:"value",header:"Value"},{body:c(({data:i})=>[v(l(w(i.value)),1)]),_:1}),t(a(r),{field:"lastContact",header:"Last Contact"},{body:c(({data:i})=>[v(l(L(i.lastContact)),1)]),_:1})]),_:1},8,["value"])]),_:1})])]))}});const pe=F(de,[["__scopeId","data-v-238acbfa"]]);export{pe as default};
