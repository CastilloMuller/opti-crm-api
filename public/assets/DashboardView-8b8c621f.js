import{a0 as P,Q as I,r as v,c as j,p as F,u as $,v as e,D as s,C as b,I as i,N as l,a1 as z,x as p,s as E,P as _}from"./vendor-1b1e291c.js";import{u as M,_ as O}from"./index-3e2ecb9a.js";const Q=()=>{{const a=window.location.protocol,r=window.location.host;return`${a}//${r}`}},y=P.create({baseURL:Q(),headers:{"Content-Type":"application/json"},timeout:1e4});y.interceptors.request.use(a=>a,a=>(console.error("Request error:",a),Promise.reject(a)));y.interceptors.response.use(a=>a,a=>(a.response?console.error("Response error:",{status:a.response.status,data:a.response.data}):a.request?console.error("No response received:",a.request):console.error("Request setup error:",a.message),Promise.reject(a)));const W={class:"dashboard-view"},G={class:"dashboard-header"},H={class:"header-actions"},J={class:"connection-status"},K={class:"quick-actions"},X={class:"dashboard-grid"},Y={class:"lead-stats"},Z={class:"stat-item"},ee={class:"stat-value"},te={class:"stat-item"},se={class:"stat-value"},ae={class:"stat-item"},oe={class:"stat-value"},ne={class:"stat-item"},ie={class:"stat-value"},le={class:"stat-item"},ce={class:"stat-value"},de=I({__name:"DashboardView",setup(a){const r=z(),{isConnected:h}=M(),c=v({stats:{totalLeads:0,activeLeads:0,convertedLeads:0,conversionRate:"0%",totalValue:0},recentActivity:[],recentLeads:[]}),w=v(new Date().toLocaleString()),C=v(!1),g=v(null),f=j(()=>({status:h.value?"Connected":"Disconnected",icon:h.value?"pi pi-check-circle":"pi pi-times-circle",class:h.value?"status-connected":"status-disconnected"}));async function L(){C.value=!0,g.value=null;try{const t=await y.get("/api/dashboard");t.data&&(c.value=t.data,w.value=new Date().toLocaleString())}catch(t){console.error("Error fetching dashboard data:",t),g.value=t.message||"Failed to fetch dashboard data"}finally{C.value=!1}}function R(){r.push("/leads?new=true")}function S(){r.push("/calendar?new=true")}function T(){r.push("/analytics")}function N(){r.push("/leads")}function x(t){t.data&&t.data.id&&r.push(`/leads/${t.data.id}`)}function D(t){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t||0)}function k(t){return new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}function A(t){return{lead:"pi pi-user-plus",task:"pi pi-calendar",note:"pi pi-pencil",call:"pi pi-phone",email:"pi pi-envelope",meeting:"pi pi-users"}[t]||"pi pi-info-circle"}function q(t){return{new:"info",contacted:"warning",qualified:"success",lost:"danger"}[t]||"info"}function U(t){return t.charAt(0).toUpperCase()+t.slice(1)}return F(()=>{L()}),(t,o)=>{const u=p("Button"),m=p("Panel"),d=p("Column"),V=p("DataTable"),B=p("Tag");return E(),$("div",W,[e("div",G,[o[0]||(o[0]=e("h1",null,"Dashboard",-1)),e("div",H,[s(u,{label:"Refresh",icon:"pi pi-refresh",onClick:L,class:"p-button-outlined"})]),e("div",J,[e("i",{class:b(f.value.icon)},null,2),e("span",{class:b(f.value.class)},i(f.value.status),3),e("small",null,"Last update: "+i(w.value),1)])]),e("div",K,[s(u,{label:"New Lead",icon:"pi pi-plus",onClick:R,class:"p-button-success"}),s(u,{label:"Add Task",icon:"pi pi-calendar-plus",onClick:S}),s(u,{label:"View Analytics",icon:"pi pi-chart-line",onClick:T,class:"p-button-help"})]),e("div",X,[s(m,{header:"Lead Overview",class:"dashboard-panel"},{icons:l(()=>[s(u,{icon:"pi pi-arrow-right",onClick:N,class:"p-button-text p-button-sm"})]),default:l(()=>[e("div",Y,[e("div",Z,[e("div",ee,i(c.value.stats.totalLeads),1),o[1]||(o[1]=e("div",{class:"stat-label"},"Total Leads",-1))]),e("div",te,[e("div",se,i(c.value.stats.activeLeads),1),o[2]||(o[2]=e("div",{class:"stat-label"},"Active Leads",-1))]),e("div",ae,[e("div",oe,i(c.value.stats.convertedLeads),1),o[3]||(o[3]=e("div",{class:"stat-label"},"Converted Leads",-1))]),e("div",ne,[e("div",ie,i(c.value.stats.conversionRate),1),o[4]||(o[4]=e("div",{class:"stat-label"},"Conversion Rate",-1))]),e("div",le,[e("div",ce,i(D(c.value.stats.totalValue)),1),o[5]||(o[5]=e("div",{class:"stat-label"},"Total Value",-1))])])]),_:1}),s(m,{header:"Recent Activity",class:"dashboard-panel"},{default:l(()=>[s(V,{value:c.value.recentActivity,class:"activity-timeline",rows:5},{default:l(()=>[s(d,{field:"type",header:"Type"},{body:l(({data:n})=>[e("i",{class:b(A(n.type)),style:{"margin-right":"0.5rem"}},null,2),_(" "+i(U(n.type)),1)]),_:1}),s(d,{field:"description",header:"Description"}),s(d,{field:"date",header:"Date"},{body:l(({data:n})=>[_(i(k(n.date)),1)]),_:1})]),_:1},8,["value"])]),_:1}),s(m,{header:"Recent Leads",class:"dashboard-panel"},{default:l(()=>[s(V,{value:c.value.recentLeads,class:"recent-leads-table",rows:5,onRowClick:x,selectionMode:"single"},{default:l(()=>[s(d,{field:"name",header:"Name"}),s(d,{field:"company",header:"Company"}),s(d,{field:"status",header:"Status"},{body:l(({data:n})=>[s(B,{value:n.status,severity:q(n.status)},null,8,["value","severity"])]),_:1}),s(d,{field:"value",header:"Value"},{body:l(({data:n})=>[_(i(D(n.value)),1)]),_:1}),s(d,{field:"lastContact",header:"Last Contact"},{body:l(({data:n})=>[_(i(k(n.lastContact)),1)]),_:1})]),_:1},8,["value"])]),_:1})])])}}});const pe=O(de,[["__scopeId","data-v-cec11c1a"]]);export{pe as default};
